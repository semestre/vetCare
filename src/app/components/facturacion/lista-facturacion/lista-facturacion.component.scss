/* ====== BASE CLARA ====== */
:host {
  color-scheme: only light;
  --ion-background-color: #fff;
  --ion-text-color: #0f172a;

  --accent: #2193b0;
  --btn-blue: #3b82f6;
  --btn-blue-hover: #2563eb;

  --soft-border: 1px solid rgba(226, 232, 240, 0.9);
  --card-shadow: 0 12px 28px rgba(2, 6, 23, 0.08);
}

/* ====== HEADER BLANCO ====== */
.header-white {
  background: #fff !important;
  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.06);
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  z-index: 20;
  margin-top: var(--outer-header-height, 55px);
  overflow: visible !important; /* deja ver sombra del buscador */
}
.header-white ion-toolbar {
  --background: #fff !important;
  overflow: visible !important;
}

/* ====== FILA SUPERIOR: TÍTULO + BUSCADOR ====== */
.header-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px 10px;
  margin-bottom: 8px;
}

.title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 800;
  color: #1e293b;
}
.title ion-icon {
  color: var(--accent);
  font-size: 1.2rem;
}

/* ====== SEARCHBAR PÍLDORA ====== */
.header-row ion-searchbar {
  flex: 1;
  max-width: 560px;
  height: 44px;
  --background: #fff;
  --color: #0f172a;
  --placeholder-color: #64748b;
  --icon-color: #64748b;
  --clear-button-color: #64748b;
  border: none !important;
  box-shadow: none !important;
}

/* Contenedor principal del searchbar */
.header-row ion-searchbar::part(container) {
  border-radius: 9999px !important;
  border: 1px solid rgba(226, 232, 240, 0.9) !important;
  background: #ffffff !important;
  padding-inline: 14px !important;
  box-shadow: 0 8px 18px rgba(2, 6, 23, 0.08) !important;
  overflow: hidden !important;
  transition: box-shadow 0.25s ease, border-color 0.25s ease;
}

/* Glow al enfocarse */
.header-row ion-searchbar:focus-within::part(container) {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25),
              0 8px 18px rgba(2, 6, 23, 0.08);
  border-color: rgba(59, 130, 246, 0.6);
}

/* Refuerzo interno del radio */
:host ::ng-deep ion-searchbar .searchbar-input-container,
:host ::ng-deep ion-searchbar .searchbar-input {
  border-radius: 9999px !important;
  overflow: hidden !important;
}

/* ====== CONTROLES (FILTROS + BOTÓN) ====== */
.controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin: 8px 12px 14px;
  position: relative;
  z-index: 1;
}
.controls .filters {
  flex: 1;
  min-width: 0;
}

/* Segment pastilla claro */
ion-segment {
  background: #f3f7fb;
  border-radius: 999px;
  padding: 4px;
  box-shadow: none;
  border: 0;
}
ion-segment-button {
  --indicator-color: #fff;
  --color: #0f172a;
  --color-checked: #0f172a;
  --background: transparent;
  --background-checked: #fff;
  border-radius: 999px;
}

/* Botón "Nueva factura" */
.controls ion-button {
  --border-radius: 9999px;
  --box-shadow: none;
  --background: var(--btn-blue);
  --background-hover: var(--btn-blue-hover);
  --color: #fff;
  height: 42px;
  min-width: 140px;
  padding: 0 22px;
  white-space: nowrap;
  font-weight: 700;
  letter-spacing: 0.3px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ====== FONDO DEL CONTENIDO ====== */
.content-bg {
  --background: linear-gradient(180deg, #f7fbff 0%, #fff 100%);
}

/* ====== TICKETS ====== */
.ticket-wrap { position: relative; }

.ticket-badge {
  --badge-color: #4f46e5;
  position: absolute;
  top: -14px;
  left: 14px;
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: var(--badge-color);
  display: grid;
  place-items: center;
  color: #fff;
  border: 3px solid #fff;
  box-shadow: 0 6px 12px rgba(2, 6, 23, 0.15);
  z-index: 3;
}
.ticket-badge ion-icon { font-size: 18px; color: #fff; }
.ticket-badge.color-1 { --badge-color: #ec4899; } /* rosa */
.ticket-badge.color-2 { --badge-color: #10b981; } /* verde */
.ticket-badge.color-3 { --badge-color: #3b82f6; } /* azul */
.ticket-badge.color-4 { --badge-color: #f59e0b; } /* ámbar */

.ticket {
  background: #fff;
  border: var(--soft-border);
  border-radius: 18px;
  box-shadow: var(--card-shadow);
  overflow: visible;                 /* permite ver el badge */
  padding-top: 10px;                 /* respiro bajo el badge */
  transition: transform 0.2s, box-shadow 0.2s;
}
.ticket.hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 32px rgba(2, 6, 23, 0.12);
}

.ticket-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
}
.ticket-head .left .k { font-size: 0.8rem; color: #64748b; }
.ticket-head .left .v { font-weight: 800; color: #1f2a44; }

.ticket-head .right ion-chip.mp {
  --background: #eef7ff;
  --color: #1e3a8a;
  border-radius: 16px;
}

/* Filas */
.ticket ion-card-content { padding: 12px 16px 16px; }
.ticket .row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  background: #f7fafc;
  border: 1px solid #e6edf5;
  border-radius: 12px;
  margin-bottom: 10px;
}
.ticket .row.dotted { background: #f9fbff; border-style: dashed; }
.ticket .row .k { color: #64748b; font-size: 0.9rem; }
.ticket .row .v { color: #0f172a; font-weight: 600; margin-left: 10px; }

/* Total */
.ticket .total {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 6px;
  padding: 10px 12px;
  background: #fff;
  border: 1px solid #e6edf5;
  border-radius: 12px;
}
.ticket .total span { color: #64748b; }
.ticket .total strong { color: #0f172a; }

/* Bordes de boleto */
.ticket-edge.top,
.ticket-edge.bottom {
  height: 10px;
  background: radial-gradient(circle at 10px 5px, #fff 6px, transparent 6px) repeat-x;
  opacity: 0.7;
}
.ticket-edge.bottom { transform: rotate(180deg); }

/* Skeleton */
.ticket.sk { box-shadow: none; }

/* Estado vacío */
.empty { text-align: center; padding: 2rem 1rem; }
.empty .emoji { font-size: 2.5rem; }

/* ====== RESPONSIVE ====== */
@media (max-width: 480px) {
  .header-row { flex-wrap: wrap; }
  .controls { flex-direction: column; align-items: stretch; }
  .controls ion-button { align-self: flex-end; }
}
